service:
  name: airnode-${opt:providerIdShort}

plugins:
  - serverless-plugin-typescript
  - serverless-plugin-optimize

provider:
  name: aws
  region: ${opt:awsRegion}
  runtime: nodejs12.x
  memorySize: 256
  environment: ${file(secrets.json)}
  iamRoleStatements:
    - Effect: 'Allow'
      Action: 'lambda:InvokeFunction'
      Resource: '*'

package: 
  individually: true
  
functions:
  start:
    handler: ./src/handlers.start
    timeout: 60

  initializeProvider:
    handler: ./src/handlers.initializeProvider
    timeout: 20

  callApi:
    handler: ./src/handlers.callApi
    timeout: 30

  processProviderRequests:
    handler: ./src/handlers.processProviderRequests
    timeout: 10
